<html>
    <head>
		<meta charset="UTF-8">
        <title>
            无人机计算横断面测试
        </title>
        <!-- <script src="survey.js"></script> -->
		<script src="GeoTools.js"></script>
		<script src="TransectStyleComplexItem.js"></script>
		<script src="CorridorScanComplexItem.js"></script>
		<script src="SurveyComplexItem.js"></script>
		<script src="StructureScanComplexItem.js"></script>
		

		<script type="text/javascript">
			//
			function jsReadFiles(files) {
	 
				 var file = files[0];
				 var content;
				 var reader = new FileReader();//new一个FileReader实例
				 if (/text+/.test(file.type)) {//判断文件类型，是不是text类型
					 reader.onload = function() {
						 $('body').append('<pre>' + this.result + '</pre>');
					 }
					 reader.readAsText(file);
				 } else if(/image+/.test(file.type)) {//判断文件是不是imgage类型
					 reader.onload = function() {
						 //$('body').append('<img src="' + this.result + '"/>');
						 content = this.result;
					}
					 reader.readAsDataURL(file);
				}
				return content;
			}
			function test()
			{

				
				var item = new SurveyComplexItem();
				var item = new CorridorScanComplexItem();
				var centerPoint = new _Point(116.0,40.0,0);
				//item.setViewPort(centerPoint, 0.3, 0.2);
				item.setCooridorWidth(50);
				//var ssa = '{"AdjustedFootprintFrontal":225,"AdjustedFootprintSide":300,"CameraName":"CustomCamera","DistanceToSurface":729.3354943273906,"DistanceToSurfaceRelative":true,"FixedOrientation":false,"FocalLength":4.5,"FrontalOverlap":70,"ImageDensity":25,"ImageHeight":3000,"ImageWidth":4000,"Landscape":true,"MinTriggerInterval":0,"SensorHeight":4.55,"SensorWidth":6.17,"SideOverlap":70,"ValueSetIsDistance":false,"version":1}';
				//item.setCameraCalc(ssa);
				// 矩形框
				//var poly = item.getAreaPoints();
				// 多边形不是由程序生成时调用
				//<!-- item.setSelfDefineAreaPoints(poly);-->
				item.rebuildTransects();
				// 飞行路径 白色线
				var flyPath = item.getFlyPath();
				// 飞入飞出点
				var entryExitPoint = item.getEntryExitPoint();
				// 统计 面积,拍照数
				var statctis = item.getStatistics();

				var missionJson = item.buildMissionItemToJson(1);

				// 修改控制参数 ,其他对应函数名
				item.updateAngle(10);

				flyPath =  item.getFlyPath();

				//var ceter = new _Point(116.00, 40.0, 0);
				//calcAreaCorner(ceter, 0.026607513427734375, 0.011011378019674112);
				//rebuildTransectsPhase1Worker(false);
				//rebuildTransectsPhase2();
				//var retval  = rebuildTransectsPhase1Worker(false, args);
				//var str = JSON.stringify(retval);
				//alert(str);
				//rebuildTransectsPhase2();
				//var list = [];
				//for (var i = 0; i < 5 ; ++i)
				//{
				//	var inarr  = [];
				//	for (var j = 0; j < 5; ++j)
				//	{
				//		var tmpInfo = new _CoordInfo(0, 0, 0);
				//		inarr.push(tmpInfo);
				//	}
				//	list.push(inarr);
				//}

				//alert(buildMissionItemJson());
			}
		</script>
    </head>
    <body>
		<button type = "button" onClick = "test()">TEST</button> <br/>
		<input id = "getval" type = "input"> </input>
    </body>
</html>